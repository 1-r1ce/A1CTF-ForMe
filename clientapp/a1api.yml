openapi: '3.0.3'
info:
  title: A1CTF API
  version: '1.0'
servers:
  - url: http://localhost:7777/
paths:
  /api/auth/login:
    post:
      tags: [auth]
      operationId: userLogin
      summary: Login
      responses:
        '200':
          description: OK
        '404':
          description: User Not Found
        '401':
          description: Password Incorrect
        '500':
          description: Server Error
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLogin'
  /api/account/profile:
    get:
      tags: [user]
      operationId: getUserProfile
      summary: Get current user profile
      description: Get current user profile information
      security:
        - cookieAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    $ref: '#/components/schemas/UserProfile'
                required:
                  - code
                  - data
        '401':
          description: Unauthorized
        '500':
          description: Server Error
  /api/auth/register:
    post:
      tags: [auth]
      operationId: userRegister
      summary: Register
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegister'
  /api/admin/challenge/create:
    post:
      tags: [admin]
      operationId: createChallenge
      summary: Create a new challenge
      description: Create a new challenge with attachments, container configurations and judge configuration.
      responses:
        '200':
          description: Challenge created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  challenge_id:
                    type: integer
                  create_at:
                    type: string
                    format: date-time
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminChallengeConfig'
  /api/admin/challenge/{challenge_id}:
    get:
      tags: [admin]
      operationId: getChallengeInfo
      summary: Get challenge info
      responses:
        '200':
          description: Challenge info get
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    $ref: '#/components/schemas/AdminChallengeConfig'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to retrieve
          schema:
            type: integer
    delete:
      tags: [admin]
      operationId: deleteChallenge
      summary: Delete a exist challenge
      responses:
        '200':
          description: Challenge delete successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
        '404':
          description: Challenge not found
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to retrieve
          schema:
            type: integer
    put:
      tags: [admin]
      operationId: updateChallenge
      summary: Update a exist challenge
      responses:
        '200':
          description: Challenge update successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
        '404':
          description: Challenge not found
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminChallengeConfig'
      parameters:
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to retrieve
          schema:
            type: integer
  /api/admin/challenge/list:
    post:
      tags: [admin]
      operationId: listChallenge
      summary: List challenges
      responses:
        '200':
          description: Challenge listed
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdminChallengeSimpleInfo'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                size:
                  type: integer
                offset:
                  type: integer
                category:
                  $ref: '#/components/schemas/ChallengeCategory'
              required:
                - size
                - offset
  /api/admin/challenge/search:
    post:
      tags: [admin]
      operationId: searchChallenges
      summary: Search a challenge
      responses:
        '200':
          description: Matched challenge
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        challenge_id:
                          type: integer
                        name:
                          type: string
                        category:
                          $ref: '#/components/schemas/ChallengeCategory'
                        create_time:
                          type: string
                          format: date-time
                      required:
                        - challenge_id
                        - name
                        - category
                        - create_time
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                keyword:
                  type: string
              required:
                - keyword
  /api/admin/game/list:
    post:
      tags: [admin]
      operationId: listGames
      summary: List games
      responses:
        '200':
          description: game listed
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserGameSimpleInfo'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                size:
                  type: integer
                offset:
                  type: integer
              required:
                - size
  /api/admin/game/create:
    post:
      tags: [admin]
      operationId: createGame
      summary: Create a new game
      description: Create a new game.
      responses:
        '200':
          description: Game created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  game_id:
                    type: integer
                  create_at:
                    type: string
                    format: date-time
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminFullGameInfo'
  /api/admin/game/{game_id}:
    get:
      tags: [admin]
      operationId: getGameInfo
      summary: Get a game info
      description: Get a game info
      responses:
        '200':
          description: Game get successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    $ref: '#/components/schemas/AdminFullGameInfo'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
    put:
      tags: [admin]
      operationId: updateGame
      summary: Update a game
      description: Update a game
      responses:
        '200':
          description: Game update successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: string
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
              schema:
                $ref: '#/components/schemas/AdminFullGameInfo'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
  /api/admin/game/{game_id}/challenge/{challenge_id}:
    put:
      tags: [admin]
      operationId: addGameChallenge
      summary: Add a challenge to a game
      description: Add a challenge to a game
      responses:
        '200':
          description: AdminDetailGameChallenge add successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    $ref: '#/components/schemas/AdminDetailGameChallenge'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to add
          schema:
            type: integer
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to add
          schema:
            type: integer
  /api/admin/user/list:
    post:
      tags: [admin]
      operationId: listUsers
      summary: List users
      responses:
        '200':
          description: user listed
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdminListUserItem'
                  total:
                    type: number
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
              schema:
                type: object
                properties:
                  size:
                    type: number
                  offset:
                    type: number
                required:
                  - size
                  - offset
  /api/admin/user/update:
    post:
      tags: [admin]
      operationId: adminUpdateUser
      summary: 更新用户信息
      description: 管理员更新用户的基本信息
      responses:
        '200':
          description: 用户信息更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "用户信息已更新"
                required:
                  - code
                  - message
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 用户不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateUserPayload'
        required: true
  /api/admin/user/reset-password:
    post:
      tags: [admin]
      operationId: adminResetUserPassword
      summary: 重置用户密码
      description: 管理员重置用户的密码
      responses:
        '200':
          description: 密码重置成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "密码已重置"
                  new_password:
                    type: string
                    description: 新生成的随机密码
                    example: "Abcd1234"
                required:
                  - code
                  - message
                  - new_password
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 用户不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUserOperationPayload'
        required: true
  /api/admin/user/delete:
    post:
      tags: [admin]
      operationId: adminDeleteUser
      summary: 删除用户
      description: 管理员删除用户账号
      responses:
        '200':
          description: 用户删除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "用户已删除"
                required:
                  - code
                  - message
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 用户不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUserOperationPayload'
        required: true
  /api/game/list:
    get:
      tags: [user]
      operationId: userListGames
      summary: List games
      responses:
        '200':
          description: game listed
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserGameSimpleInfo'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
  /api/game/{game_id}:
    get:
      tags: [user]
      operationId: userGetGameInfoWithTeamInfo
      summary: Get a game info with team info
      description: Get a game info with team info
      responses:
        '200':
          description: Game get successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    $ref: '#/components/schemas/UserFullGameInfo'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
  /api/game/{game_id}/challenges:
    get:
      tags: [user]
      operationId: userGetGameChallenges
      summary: Get game challenges
      description: Get game challenges
      responses:
        '200':
          description: Game challenges get successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                    properties:
                      challenges:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserSimpleGameChallenge'
                      solved_challenges:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserSimpleGameSolvedChallenge'
                    required:
                      - challenges
                      - solved_challenges
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
  /api/game/{game_id}/challenge/{challenge_id}:
    get:
      tags: [user]
      operationId: userGetGameChallenge
      summary: Get a game challenge
      description: Get a game challenge
      responses:
        '200':
          description: Game challenge get successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    $ref: '#/components/schemas/UserDetailGameChallenge'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to retrieve
          schema:
            type: integer
  /api/game/{game_id}/notices:
    get:
      tags: [user]
      operationId: userGetGameNotices
      summary: Get game notices
      description: Get game notices
      responses:
        '200':
          description: Game notices get successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/GameNotice'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
  /api/game/{game_id}/createTeam:
    post:
      tags: [user]
      operationId: userGameCreateTeam
      summary: Create a team for a game
      description: Create a team for a game
      responses:
        '200':
          description: Game created
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/GameNotice'
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
              schema:
                $ref: '#/components/schemas/CreateGameTeamPayload'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
  /api/game/{game_id}/flag/{challenge_id}:
    post:
      tags: [user]
      operationId: userGameSubmitFlag
      summary: Submit a flag
      description: Submit a flag
      responses:
        '200':
          description: flag submited
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                    properties:
                      judge_id:
                        type: string
                    required:
                      - judge_id
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
              schema:
                type: object
                properties:
                  flag:
                    type: string
                required:
                  - flag
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to submit
          schema:
            type: integer
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to submit
          schema:
            type: integer
  /api/game/{game_id}/flag/{judge_id}:
    get:
      tags: [user]
      operationId: userGameJudgeResult
      summary: Get a judge result
      description: Get a judge result
      responses:
        '200':
          description: judge result get
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                    properties:
                      judge_id:
                        type: string
                      judge_status:
                        type: string
                        enum:
                          - JudgeQueueing
                          - JudgeRunning
                          - JudgeError
                          - JudgeWA
                          - JudgeAC
                          - JudgeTimeout
                    required:
                      - judge_id
                      - judge_status
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to submit
          schema:
            type: integer
        - name: judge_id
          in: path
          required: true
          description: The Flag ID
          schema:
            type: string
  /api/game/{game_id}/container/{challenge_id}:
    post:
      tags: [user]
      operationId: userCreateContainerForAChallenge
      summary: Create a container for a challenge
      description: Create a container for a challenge
      responses:
        '200':
          description: Container created
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to retrieve
          schema:
            type: integer
    delete:
      tags: [user]
      operationId: userDeleteContainerForAChallenge
      summary: Delete a container for a challenge
      description: Delete a container for a challenge
      responses:
        '200':
          description: Container deleted
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to retrieve
          schema:
            type: integer
    patch:
      tags: [user]
      operationId: userExtendContainerLifeForAChallenge
      summary: Extend a container's life for a challenge
      description: Extend a container's life for a challenge
      responses:
        '200':
          description: Container life extended
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to retrieve
          schema:
            type: integer
    get:
      tags: [user]
      operationId: userGetContainerInfoForAChallenge
      summary: Get container info for a challenge
      description: Get container info for a challenge
      responses:
        '200':
          description: Container info geted
          content:
            application/json:
              schema:
                type:
                  object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                    properties:
                      container_status:
                        $ref: '#/components/schemas/ContainerStatus'
                      container_expiretime:
                        type: string
                        format: date-time
                      containers:
                        type: array
                        items:
                          $ref: '#/components/schemas/ExposePortInfo'
                    required:
                      - container_status
                      - containers
                required:
                  - code
                  - data
        '400':
          description: Bad request
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      parameters:
        - name: game_id
          in: path
          required: true
          description: The ID of the game to retrieve
          schema:
            type: integer
        - name: challenge_id
          in: path
          required: true
          description: The ID of the challenge to retrieve
          schema:
            type: integer
  /api/game/{game_id}/scoreboard:
    get:
      tags: [user]
      operationId: userGetGameScoreboard
      summary: Get game scoreboard data
      parameters:
        - name: game_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GameScoreboardResponse'
  /api/admin/team/list:
    post:
      tags: [admin]
      operationId: adminListTeams
      summary: 管理员获取队伍列表
      description: 管理员根据游戏ID获取参与该游戏的队伍列表，支持分页
      responses:
        '200':
          description: 成功获取队伍列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdminListTeamItem'
                  total:
                    type: integer
                    description: 总队伍数量
                required:
                  - code
                  - data
                  - total
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminListTeamsPayload'
        required: true
  /api/admin/team/approve:
    post:
      tags: [admin]
      operationId: adminApproveTeam
      summary: 批准队伍
      description: 将队伍状态设置为已批准(Approved)
      responses:
        '200':
          description: 成功更新队伍状态
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "队伍已批准"
                required:
                  - code
                  - message
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 未找到队伍
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminTeamOperationPayload'
        required: true
  /api/admin/team/ban:
    post:
      tags: [admin]
      operationId: adminBanTeam
      summary: 锁定队伍
      description: 将队伍状态设置为已禁赛(Banned)
      responses:
        '200':
          description: 成功锁定队伍
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "队伍已锁定"
                required:
                  - code
                  - message
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 未找到队伍
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminTeamOperationPayload'
        required: true
  /api/admin/team/unban:
    post:
      tags: [admin]
      operationId: adminUnbanTeam
      summary: 解锁队伍
      description: 将队伍从禁赛状态(Banned)恢复为已批准状态(Approved)
      responses:
        '200':
          description: 成功解锁队伍
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "队伍已解锁"
                required:
                  - code
                  - message
        '400':
          description: 请求参数错误或队伍当前不是禁赛状态
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 未找到队伍
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminTeamOperationPayload'
        required: true
  /api/admin/team/delete:
    post:
      tags: [admin]
      operationId: adminDeleteTeam
      summary: 删除队伍
      description: 从系统中删除队伍
      responses:
        '200':
          description: 成功删除队伍
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "队伍已删除"
                required:
                  - code
                  - message
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 未找到队伍
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminTeamOperationPayload'
        required: true
  /api/admin/container/list:
    post:
      tags: [admin]
      operationId: adminListContainers
      summary: 获取容器列表
      description: 管理员获取所有容器的列表
      responses:
        '200':
          description: 容器列表获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdminContainerItem'
                  total:
                    type: integer
                    description: 总容器数量
                required:
                  - code
                  - data
                  - total
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminListContainersPayload'
        required: true
  /api/admin/container/delete:
    post:
      tags: [admin]
      operationId: adminDeleteContainer
      summary: 删除容器
      description: 管理员删除指定的容器
      responses:
        '200':
          description: 容器删除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "容器已删除"
                required:
                  - code
                  - message
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 容器不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminContainerOperationPayload'
        required: true
  /api/admin/container/extend:
    post:
      tags: [admin]
      operationId: adminExtendContainer
      summary: 延长容器周期
      description: 管理员延长指定容器的生命周期
      responses:
        '200':
          description: 容器生命周期延长成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "容器生命周期已延长"
                  new_expire_time:
                    type: string
                    format: date-time
                    description: 新的过期时间
                required:
                  - code
                  - message
                  - new_expire_time
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 容器不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminExtendContainerPayload'
        required: true
  /api/admin/container/flag:
    get:
      tags: [admin]
      operationId: adminGetContainerFlag
      summary: 获取容器Flag
      description: 管理员获取指定容器的Flag
      parameters:
        - name: container_id
          in: query
          required: true
          description: 容器ID
          schema:
            type: string
      responses:
        '200':
          description: Flag获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      flag_content:
                        type: string
                        description: 容器Flag内容
                    required:
                      - flag_content
                required:
                  - code
                  - data
        '400':
          description: 请求参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '404':
          description: 容器或Flag不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        '500':
          description: 服务器内部错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: a1token
  schemas:
    UserLogin:
      description: User login form
      type: object
      properties:
        username:
          type: string
        password:
          type: string
        captcha:
          type: string
      required:
        - username
        - password
    UserRegister:
      description: User register form
      type: object
      properties:
        username:
          type: string
        password:
          type: string
        captcha:
          type: string
        email:
          type: string
      required:
        - email
        - password
        - username
    AttachmentType:
      type: string
      enum:
        - "STATICFILE"
        - "DYNAMICFILE"
        - "REMOTEFILE"
      description: |
        Type of the attachment:
        - STATICFILE: Static file stored on server
        - DYNAMICFILE: Dynamically generated file
        - REMOTEFILE: File hosted on external server
      example: "STATICFILE"
    Attachment:
      type: object
      properties:
        attach_hash:
          type: string
          nullable: true
        attach_name:
          type: string
        attach_type:
          $ref: '#/components/schemas/AttachmentType'
        attach_url:
          type: string
        generate_script:
          type: string
          nullable: true
      required:
        - attach_name
        - attach_type
        - attach_url
    ExposePort:
      type: object
      properties:
        name:
          type: string
        port:
          type: integer
      required:
        - name
        - port
    Container:
      type: object
      properties:
        command:
          type: string
          nullable: true
        env:
          type: array
          items:
            $ref: '#/components/schemas/EnvironmentItem'
        expose_ports:
          type: array
          items:
            $ref: '#/components/schemas/ExposePort'
        image:
          type: string
        name:
          type: string
        cpu_limit:
          type: integer
        memory_limit:
          type: integer
        storage_limit:
          type: integer
      required:
        - expose_ports
        - image
        - name
    JudgeType:
      type: string
      enum:
        - DYNAMIC
        - SCRIPT
    JudgeConfig:
      type: object
      properties:
        flag_template:
          type: string
        judge_script:
          type: string
          nullable: true
        judge_type:
          $ref: '#/components/schemas/JudgeType'
      required:
        - flag_template
        - judge_type
    ChallengeCategory:
      type: string
      enum:
        - MISC
        - CRYPTO
        - PWN
        - WEB
        - REVERSE
        - FORENSICS
        - HARDWARE
        - MOBILE
        - PPC
        - AI
        - PENTENT
        - OSINT
    EnvironmentItem:
      type: object
      properties:
        name:
          type: string
        value:
          type: string
      required:
        - name
        - value
    AdminChallengeSimpleInfo:
      type: object
      properties:
        challenge_id:
          type: integer
        name:
          type: string
        description:
          type: string
        category:
          $ref: '#/components/schemas/ChallengeCategory'
        create_time:
          type: string
          format: date-time
      required:
        - challenge_id
        - name
        - description
        - category
        - create_time
    AdminChallengeConfig:
      type: object
      properties:
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/Attachment'
        category:
          $ref: '#/components/schemas/ChallengeCategory'
        challenge_id:
          type: integer
        container_config:
          type: array
          items:
            $ref: '#/components/schemas/Container'
        create_time:
          type: string
          format: date-time
        description:
          type: string
        judge_config:
          $ref: '#/components/schemas/JudgeConfig'
        name:
          type: string
        type_:
          type: integer
      required:
        - name
        - description
        - category
        - container_config
        - judge_config
    ErrorMessage:
      type: object
      properties:
        code:
          type: integer
        message:
          type: string
      required:
        - code
        - message
    GameStage:
      type: object
      properties:
        stage_name:
          type: string
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
      required:
        - stage_name
        - start_time
        - end_time
    AdminDetailGameChallenge:
      type: object
      properties:
        challenge_id:
          type: integer
        challenge_name:
          type: string
        total_score:
          type: number
          format: double
        cur_score:
          type: number
          format: double
        hints:
          type: array
          items:
            type: object
            properties:
              content:
                type: string
              create_time:
                type: string
                format: date-time
              visible:
                type: boolean
            required:
              - content
              - create_time
              - visible
        belong_stage:
          type: string
        solve_count:
          type: number
        visible:
          type: boolean
        category:
          $ref: '#/components/schemas/ChallengeCategory'
        judge_config:
          $ref: '#/components/schemas/JudgeConfig'
      required:
        - challenge_id
        - challenge_name
        - total_score
        - cur_score
    AddGameChallengePayload:
      type: object
      properties:
        challenge_id:
          type: integer
        game_id:
          type: integer
      required:
        - challenge_id
        - game_id
    AdminFullGameInfo:
      type: object
      properties:
        game_id:
          type: integer
          format: int64
        name:
          type: string
        summary:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        poster:
          type: string
          nullable: true
        invite_code:
          type: string
          nullable: true
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        practice_mode:
          type: boolean
        team_number_limit:
          type: integer
        container_number_limit:
          type: integer
        require_wp:
          type: boolean
        wp_expire_time:
          type: string
          format: date-time
        visible:
          type: boolean
        stages:
          type: array
          items:
            $ref: '#/components/schemas/GameStage'
        challenges:
          type: array
          items:
            $ref: '#/components/schemas/AdminDetailGameChallenge'
      required:
        - game_id
        - name
        - start_time
        - end_time
        - practice_mode
        - team_number_limit
        - container_number_limit
        - require_wp
        - wp_expire_time
        - stages
        - visible
    UserGameSimpleInfo:
      type: object
      properties:
        game_id:
          type: integer
          format: int64
        name:
          type: string
        summary:
          type: string
          nullable: true
        poster:
          type: string
          nullable: true
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        visible:
          type: boolean
      required:
        - game_id
        - name
        - start_time
        - end_time
        - summary
        - visible
    SolveRecord:
      type: object
      properties:
        user_id:
          type: string
        game_id:
          type: integer
        solve_time:
          type: string
          format: date-time
        challenge_id:
          type: integer
        score:
          type: number
          format: float
        solve_rank:
          type: integer
      required:
        - user_id
        - game_id
        - solve_time
        - challenge_id
        - score
        - solve_rank
    UserSimpleGameChallenge:
      type: object
      properties:
        challenge_id:
          type: integer
        challenge_name:
          type: string
        total_score:
          type: number
          format: double
        cur_score:
          type: number
          format: double
        solve_count:
          type: number
        category:
          $ref: '#/components/schemas/ChallengeCategory'
      required:
        - challenge_id
        - challenge_name
        - total_score
        - cur_score
    ChallengeContainerType:
      type: string
      enum:
        - DYNAMIC_CONTAINER
        - STATIC_CONTAINER
        - NO_CONTAINER
    UserSimpleGameSolvedChallenge:
      type: object
      properties:
        challenge_id:
          type: integer
        challenge_name:
          type: string
        solve_time:
          type: string
          format: date-time
        rank:
          type: number
      required:
        - challenge_id
        - challenge_name
        - solve_time
        - rank
    UserAttachmentConfig:
      type: object
      properties:
        attach_name:
          type: string
          description: The name of the attachment
          example: "example.pdf"
        attach_type:
          $ref: '#/components/schemas/AttachmentType'
        attach_url:
          type: string
          nullable: true
          description: URL of the attachment (if applicable)
          example: "https://example.com/files/example.pdf"
          x-omitempty: true
        attach_hash:
          type: string
          nullable: true
          description: Hash of the attachment content
          example: "a1b2c3d4e5f6"
          x-omitempty: true
        download_hash:
          type: string
          nullable: true
          description: Unique hash for download authorization
          example: "d4e5f6a1b2c3"
          x-omitempty: true
      required:
        - attach_name
        - attach_type
    UserDetailGameChallenge:
      type: object
      properties:
        challenge_id:
          type: integer
        challenge_name:
          type: string
        description:
          type: string
        total_score:
          type: number
          format: double
        cur_score:
          type: number
          format: double
        hints:
          type: array
          items:
            type: object
            properties:
              content:
                type: string
              create_time:
                type: string
                format: date-time
              visible:
                type: boolean
            required:
              - content
              - create_time
              - visible
        belong_stage:
          type: string
        solve_count:
          type: number
        category:
          $ref: '#/components/schemas/ChallengeCategory'
        container_type:
          $ref: '#/components/schemas/ChallengeContainerType'
        container_status:
          $ref: '#/components/schemas/ContainerStatus'
        container_expiretime:
          type: string
          format: date-time
        containers:
          type: array
          items:
            $ref: '#/components/schemas/ExposePortInfo'
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/UserAttachmentConfig'
      required:
        - challenge_id
        - challenge_name
        - total_score
        - cur_score
    ParticipationStatus:
      type: string
      enum:
        - "UnRegistered"
        - "Pending"
        - "Approved"
        - "Rejected"
        - "Participated"
        - "Banned"
      description: |
        Team participation status:
        - UnRegistered: 未报名
        - Pending: 已报名，等待审核
        - Approved: 已报名，审核通过
        - Rejected: 已报名，审核不通过
        - Participated: 已报名，已参加
        - Banned: 已被禁赛
    UserTeamInfo:
      type: object
      properties:
        team_id:
          type: integer
          format: int64
        game_id:
          type: integer
          format: int64
        team_name:
          type: string
        team_avatar:
          type: string
          nullable: true
        team_slogan:
          type: string
          nullable: true
        team_description:
          type: string
          nullable: true
        team_members:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
        team_score:
          type: number
          format: double
        team_hash:
          type: string
        invite_code:
          type: string
          nullable: true
        team_status:
          $ref: '#/components/schemas/ParticipationStatus'
      required:
        - team_id
        - game_id
        - team_name
        - team_score
        - team_hash
        - team_status
    UserFullGameInfo:
      type: object
      properties:
        game_id:
          type: integer
          format: int64
        name:
          type: string
        summary:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        poster:
          type: string
          nullable: true
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        practice_mode:
          type: boolean
        team_number_limit:
          type: integer
        container_number_limit:
          type: integer
        require_wp:
          type: boolean
        wp_expire_time:
          type: string
          format: date-time
        visible:
          type: boolean
        stages:
          type: array
          items:
            $ref: '#/components/schemas/GameStage'
        team_status:
          $ref: '#/components/schemas/ParticipationStatus'
        team_info:
          $ref: '#/components/schemas/UserTeamInfo'
      required:
        - game_id
        - name
        - start_time
        - end_time
        - practice_mode
        - team_number_limit
        - container_number_limit
        - require_wp
        - wp_expire_time
        - stages
        - visible
        - team_status
    NoticeCategory:
      type: string
      enum:
        - FirstBlood
        - SecondBlood
        - ThirdBlood
        - NewChallenge
        - NewHint
        - NewAnnouncement
    GameNotice:
      type: object
      properties:
        notice_id:
          type: integer
          format: int64
        notice_category:
          $ref: '#/components/schemas/NoticeCategory'
        data:
          type: array
          items:
            type: string
        create_time:
          type: string
          format: date-time
      required:
        - notice_id
        - notice_category
        - data
        - create_time
    CreateGameTeamPayload:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        slogan:
          type: string
      required:
        - name
        - description
        - slogan
    ContainerStatus:
      type: string
      enum:
        - ContainerStopped
        - ContainerRunning
        - ContainerStarting
        - ContainerError
        - ContainerStopping
        - ContainerQueueing
        - NoContainer
      description: |
        Possible statuses of a container:
        - `ContainerStopped`: The container is stopped.
        - `ContainerRunning`: The container is running.
        - `ContainerStarting`: The container is starting.
        - `ContainerError`: The container encountered an error.
        - `ContainerStopping`: The container is stopping.
        - `ContainerQueueing`: The container is in a queue.
        - `NoContainer`: No container exists.
    ExposePortInfo:
      type: object
      properties:
        container_name:
          type: string
        container_ports:
          type: array
          items:
            type: object
            properties:
              port_name:
                type: string
              port:
                type: integer
              ip:
                type: string
            required:
              - port_name
              - port
              - ip
      required:
        - container_name
        - container_ports
    GameScoreboardResponse:
      type: object
      properties:
        code:
          type: integer
          example: 200
        data:
          $ref: '#/components/schemas/GameScoreboardData'

    GameScoreboardData:
      type: object
      properties:
        game_id:
          type: integer
          example: 1
        name:
          type: string
          example: "测试比赛1"
        teams:
          type: array
          items:
            $ref: '#/components/schemas/TeamScore'
        time_lines:
          type: array
          items:
            $ref: '#/components/schemas/TeamTimeline'

    TeamScore:
      type: object
      properties:
        team_id:
          type: integer
          example: 1
        team_name:
          type: string
          example: "test114514"
        team_avatar:
          type: string
          nullable: true
          example: null
        team_slogan:
          type: string
          example: ""
        team_description:
          type: string
          example: ""
        rank:
          type: integer
          example: 1
        score:
          type: number
          format: float
          example: 500
        solved_challenges:
          type: array
          items:
            $ref: '#/components/schemas/SolvedChallenge'

    SolvedChallenge:
      type: object
      properties:
        challenge_id:
          type: integer
          example: 1
        score:
          type: number
          format: float
          example: 500
        solver:
          type: string
          example: "root"
        rank:
          type: integer
          example: 1
        solve_time:
          type: string
          format: date-time
          example: "2025-05-03T07:07:34.650351Z"

    TeamTimeline:
      type: object
      properties:
        team_id:
          type: integer
          example: 1
        team_name:
          type: string
          example: "test114514"
        scores:
          type: array
          items:
            $ref: '#/components/schemas/ScoreRecord'

    ScoreRecord:
      type: object
      properties:
        record_time:
          type: number
        score:
          type: number
          format: float
          example: 500
    
    UserRole:
      type: string
      enum:
        - ADMIN
        - USER
        - MONITOR
      description: |
        User role enumeration:
        - ADMIN - Administrator
        - USER - Regular user
        - MONITOR - Monitor
      example: "USER"
    
    AdminListUserItem:
      type: object
      properties:
        user_id:
          type: string
          description: The unique identifier of the user
        user_name:
          type: string
          description: The username of the user
        real_name:
          type: string
          nullable: true
          description: The real name of the user
        student_id:
          type: string
          nullable: true
          description: The student ID of the user
        phone:
          type: string
          nullable: true
          description: The phone number of the user
        slogan:
          type: string
          nullable: true
          description: The user's slogan or motto
        register_time:
          type: string
          format: date-time
          description: The timestamp when the user registered
        last_login_time:
          type: string
          format: date-time
          description: The timestamp of the user's last login
        last_login_ip:
          type: string
          nullable: true
          description: The IP address of the user's last login
        email:
          type: string
          nullable: true
          description: The email address of the user
        avatar:
          type: string
          nullable: true
          description: URL to the user's avatar image
        role:
          $ref: '#/components/schemas/UserRole'
          description: The role of the user
        email_verified:
          type: boolean
          description: Whether the user's email has been verified
      required:
        - user_id
        - user_name
        - register_time
        - last_login_time
        - role
        - email_verified
    AdminSimpleTeamMemberInfo:
      type: object
      properties:
        avatar:
          type: string
          nullable: true
        user_name:
          type: string
        user_id:
          type: string
      required:
        - user_name
        - user_id
    AdminListTeamItem:
      type: object
      properties:
        team_id:
          type: integer
          format: int64
        team_name:
          type: string
        team_avatar:
          type: string
          nullable: true
        team_slogan:
          type: string
          nullable: true
        members:
          type: array
          items:
            $ref: '#/components/schemas/AdminSimpleTeamMemberInfo'
        status:
          $ref: '#/components/schemas/ParticipationStatus'
        score:
          type: number
          format: double
      required:
        - team_id
        - team_name
        - members
        - status
        - score
    AdminListTeamsPayload:
      type: object
      properties:
        game_id:
          type: integer
        size:
          type: integer
          minimum: 0
        offset:
          type: integer
      required:
        - game_id
        - size
    AdminTeamOperationPayload:
      type: object
      properties:
        team_id:
          type: integer
          format: int64
          description: 要操作的队伍ID
        game_id:
          type: integer
          description: 游戏ID（可选）
      required:
        - team_id
    AdminUpdateUserPayload:
      type: object
      properties:
        user_id:
          type: string
          description: The unique identifier of the user
        user_name:
          type: string
          description: The username of the user
        real_name:
          type: string
          nullable: true
          description: The real name of the user
        student_id:
          type: string
          nullable: true
          description: The student ID of the user
        phone:
          type: string
          nullable: true
          description: The phone number of the user
        slogan:
          type: string
          nullable: true
          description: The user's slogan or motto
        email:
          type: string
          nullable: true
          description: The email address of the user
        avatar:
          type: string
          nullable: true
          description: URL to the user's avatar image
        role:
          $ref: '#/components/schemas/UserRole'
          description: The role of the user
      required:
        - user_id
        - user_name
        - role
    AdminUserOperationPayload:
      type: object
      properties:
        user_id:
          type: string
          description: The unique identifier of the user
      required:
        - user_id
    AdminContainerItem:
      type: object
      properties:
        container_id:
          type: string
        container_name:
          type: string
        container_status:
          type: string
        container_expiretime:
          type: string
          format: date-time
        container_type:
          type: string
        container_ports:
          type: array
          items:
            type: object
            properties:
              port_name:
                type: string
              port:
                type: integer
              ip:
                type: string
            required:
              - port_name
              - port
              - ip
        team_name:
          type: string
        game_name:
          type: string
        challenge_name:
          type: string
      required:
        - container_id
        - container_name
        - container_status
        - container_expiretime
        - container_type
        - container_ports
        - team_name
        - game_name
        - challenge_name
    AdminListContainersPayload:
      type: object
      properties:
        game_id:
          type: integer
        size:
          type: integer
          minimum: 0
        offset:
          type: integer
      required:
        - game_id
        - size
    AdminContainerOperationPayload:
      type: object
      properties:
        container_id:
          type: string
      required:
        - container_id
    AdminExtendContainerPayload:
      type: object
      properties:
        container_id:
          type: string
      required:
        - container_id
    UserProfile:
      type: object
      properties:
        user_id:
          type: string
        username:
          type: string
        role:
          $ref: '#/components/schemas/UserRole'
        phone:
          type: string
          nullable: true
        student_number:
          type: string
          nullable: true
        realname:
          type: string
          nullable: true
        slogan:
          type: string
          nullable: true
        avatar:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        email_verified:
          type: boolean
        register_time:
          type: string
          format: date-time
        last_login_time:
          type: string
          format: date-time
        last_login_ip:
          type: string
          nullable: true
        client_config_version:
          type: string
          format: date-time
      required:
        - user_id
        - username
        - role
        - email_verified
        - register_time
        - last_login_time
        - last_login_ip